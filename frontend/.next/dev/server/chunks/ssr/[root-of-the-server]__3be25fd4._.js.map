{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/akura/Downloads/staking_pool/staking_pool/v0-modern-landing-page-for-webdeve/components/theme-provider.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type * as React from \"react\"\r\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\"\r\n\r\nexport function ThemeProvider({ children, ...props }: React.ComponentProps<typeof NextThemesProvider>) {\r\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,cAAc,EAAE,QAAQ,EAAE,GAAG,OAAwD;IACnG,qBAAO,mTAAC,sOAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/akura/Downloads/staking_pool/staking_pool/v0-modern-landing-page-for-webdeve/components/wallet-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { createContext, useContext, useRef, useState } from \"react\"\r\n\r\ninterface WalletContextType {\r\n  isConnected: boolean\r\n  walletAddress: string | null\r\n  connect: () => Promise<string | null>\r\n  disconnect: () => void\r\n  signTransactions?: (txns: any[][]) => Promise<Uint8Array[] | null>\r\n}\r\n\r\nconst WalletContext = createContext<WalletContextType | undefined>(undefined)\r\n\r\nexport function WalletProvider({ children }: { children: React.ReactNode }) {\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const [walletAddress, setWalletAddress] = useState<string | null>(null)\r\n  // pera wallet instance (lazy) stored in a ref so it persists across renders\r\n  const peraWalletRef = useRef<any>(null)\r\n\r\n  const connect = async (): Promise<string | null> => {\r\n    try {\r\n      // Dynamically import PeraWalletConnect so dev doesn't break if package isn't installed\r\n      const mod = await import(\"@perawallet/connect\")\r\n      const PeraWalletConnect = mod.default || mod.PeraWalletConnect || mod\r\n      if (!peraWalletRef.current) {\r\n        peraWalletRef.current = new PeraWalletConnect()\r\n      }\r\n\r\n      // Attempt to reconnect to existing session first\r\n      try {\r\n        const recon = await peraWalletRef.current.reconnectSession()\r\n        if (recon && recon.length) {\r\n          const addr = Array.isArray(recon) ? recon[0] : recon\r\n          setWalletAddress(String(addr))\r\n          setIsConnected(true)\r\n          // subscribe disconnect\r\n          peraWalletRef.current.connector?.on(\"disconnect\", () => disconnect())\r\n          return String(addr)\r\n        }\r\n      } catch (e) {\r\n        // ignore reconnect error\r\n      }\r\n\r\n      const accounts: any = await peraWalletRef.current.connect()\r\n      // pera may return an array of addresses or an object â€” handle both\r\n      let address: string | null = null\r\n      if (Array.isArray(accounts) && accounts.length > 0) address = accounts[0]\r\n      // some versions return { account: '...', address: '...' }\r\n      if (!address && accounts) {\r\n        address = accounts.account || accounts.address || (accounts.accounts && accounts.accounts[0]) || null\r\n      }\r\n\r\n      if (address) {\r\n        setWalletAddress(address)\r\n        setIsConnected(true)\r\n        peraWalletRef.current.connector?.on(\"disconnect\", () => disconnect())\r\n        return address\r\n      } else {\r\n        throw new Error(\"No account returned from Pera\")\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Pera Wallet integration failed or not installed:\", error)\r\n      // Do not fallback to a mock address. Let caller handle null return.\r\n      return null\r\n    }\r\n  }\r\n\r\n  const disconnect = () => {\r\n    try {\r\n      // attempt to disconnect Pera session if available\r\n      ;(async () => {\r\n        try {\r\n          if (peraWalletRef.current) {\r\n            await peraWalletRef.current.disconnect()\r\n            peraWalletRef.current = null\r\n          }\r\n        } catch (e) {\r\n          // ignore\r\n        }\r\n      })()\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n    setWalletAddress(null)\r\n    setIsConnected(false)\r\n  }\r\n\r\n  const signTransactions = async (txnGroups: any[][]): Promise<Uint8Array[] | null> => {\r\n    try {\r\n      if (!peraWalletRef.current) {\r\n        const mod = await import(\"@perawallet/connect\")\r\n        const PeraWalletConnect = mod.default || mod.PeraWalletConnect || mod\r\n        peraWalletRef.current = new PeraWalletConnect()\r\n      }\r\n      // Normalize txnGroups to arrays of Uint8Array (raw unsigned txn bytes), which Pera can sign directly.\r\n      const normalize = (g: any[]) => g.map((t) => {\r\n        // base64 string -> bytes\r\n        if (typeof t === 'string') {\r\n          const bin = atob(t)\r\n          const u8 = new Uint8Array(bin.length)\r\n          for (let i = 0; i < bin.length; i++) u8[i] = bin.charCodeAt(i)\r\n          return u8\r\n        }\r\n        // Uint8Array -> pass through\r\n        if (t instanceof Uint8Array) return t\r\n        // object with txn base64\r\n        if (t && (t as any).txn) {\r\n          const b64 = (t as any).txn\r\n          const bin = atob(b64)\r\n          const u8 = new Uint8Array(bin.length)\r\n          for (let i = 0; i < bin.length; i++) u8[i] = bin.charCodeAt(i)\r\n          return u8\r\n        }\r\n        // fallback: coerce to string then to bytes\r\n        const str = String(t)\r\n        const bin = atob(str)\r\n        const u8 = new Uint8Array(bin.length)\r\n        for (let i = 0; i < bin.length; i++) u8[i] = bin.charCodeAt(i)\r\n        return u8\r\n      })\r\n\r\n      const payload = txnGroups.map(normalize)\r\n      try {\r\n        const signed = await peraWalletRef.current.signTransaction(payload)\r\n        return signed\r\n      } catch (firstErr) {\r\n        console.warn('Pera signTransaction failed for raw payload, retrying with {txn: base64} objects', firstErr)\r\n        // helper to convert uint8array -> base64\r\n        const u8ToB64 = (u8: Uint8Array) => {\r\n          let binary = ''\r\n          for (let i = 0; i < u8.length; i++) binary += String.fromCharCode(u8[i])\r\n          return btoa(binary)\r\n        }\r\n        const alt = payload.map((group: Uint8Array[]) => group.map((u: Uint8Array) => ({ txn: u8ToB64(u) })))\r\n        try {\r\n          const signed2 = await peraWalletRef.current.signTransaction(alt)\r\n          return signed2\r\n        } catch (secondErr) {\r\n          console.error('Pera signTransaction retry with {txn: base64} also failed', secondErr)\r\n          throw secondErr\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to sign transactions with Pera:\", e)\r\n      return null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <WalletContext.Provider value={{ isConnected, walletAddress, connect, disconnect, signTransactions }}>\r\n      {children}\r\n    </WalletContext.Provider>\r\n  )\r\n}\r\n\r\nexport function useWallet() {\r\n  const context = useContext(WalletContext)\r\n  if (!context) {\r\n    throw new Error(\"useWallet must be used within a WalletProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}