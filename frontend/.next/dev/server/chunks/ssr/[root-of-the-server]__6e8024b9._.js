module.exports = [
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[project]/staking_pool/v0-modern-landing-page-for-webdeve/components/theme-provider.tsx [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ThemeProvider",
    ()=>ThemeProvider
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/next-themes/dist/index.mjs [app-ssr] (ecmascript)");
"use client";
;
;
function ThemeProvider({ children, ...props }) {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2d$themes$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ThemeProvider"], {
        ...props,
        children: children
    }, void 0, false, {
        fileName: "[project]/staking_pool/v0-modern-landing-page-for-webdeve/components/theme-provider.tsx",
        lineNumber: 7,
        columnNumber: 10
    }, this);
}
}),
"[project]/staking_pool/v0-modern-landing-page-for-webdeve/components/wallet-context.tsx [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "WalletProvider",
    ()=>WalletProvider,
    "useWallet",
    ()=>useWallet
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
"use client";
;
;
const WalletContext = /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["createContext"])(undefined);
function WalletProvider({ children }) {
    const [isConnected, setIsConnected] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [walletAddress, setWalletAddress] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    // pera wallet instance (lazy) stored in a ref so it persists across renders
    const peraWalletRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useRef"])(null);
    const connect = async ()=>{
        try {
            // Dynamically import PeraWalletConnect so dev doesn't break if package isn't installed
            const mod = await __turbopack_context__.A("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/@perawallet/connect/dist/index.js [app-ssr] (ecmascript, async loader)");
            const PeraWalletConnect = mod.default || mod.PeraWalletConnect || mod;
            if (!peraWalletRef.current) {
                peraWalletRef.current = new PeraWalletConnect();
            }
            // Attempt to reconnect to existing session first
            try {
                const recon = await peraWalletRef.current.reconnectSession();
                if (recon && recon.length) {
                    const addr = Array.isArray(recon) ? recon[0] : recon;
                    setWalletAddress(String(addr));
                    setIsConnected(true);
                    // expose underlying connector for dev debugging
                    try {
                        if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
                        ;
                    } catch (e) {}
                    // subscribe disconnect
                    peraWalletRef.current.connector?.on("disconnect", ()=>disconnect());
                    return String(addr);
                }
            } catch (e) {
            // ignore reconnect error
            }
            const accounts = await peraWalletRef.current.connect();
            // pera may return an array of addresses or an object â€” handle both
            let address = null;
            if (Array.isArray(accounts) && accounts.length > 0) address = accounts[0];
            // some versions return { account: '...', address: '...' }
            if (!address && accounts) {
                address = accounts.account || accounts.address || accounts.accounts && accounts.accounts[0] || null;
            }
            if (address) {
                setWalletAddress(address);
                setIsConnected(true);
                // expose underlying connector for dev debugging
                try {
                    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
                    ;
                } catch (e) {}
                peraWalletRef.current.connector?.on("disconnect", ()=>disconnect());
                return address;
            } else {
                throw new Error("No account returned from Pera");
            }
        } catch (error) {
            // Do not fallback to a mock address. Let caller handle null return.
            return null;
        }
    };
    const disconnect = ()=>{
        try {
            // attempt to disconnect Pera session if available
            ;
            (async ()=>{
                try {
                    if (peraWalletRef.current) {
                        await peraWalletRef.current.disconnect();
                        peraWalletRef.current = null;
                        try {
                            if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
                            ;
                        } catch (e) {}
                    }
                } catch (e) {
                // ignore
                }
            })();
        } catch (e) {
        // ignore
        }
        setWalletAddress(null);
        setIsConnected(false);
    };
    const signTransactions = async (txnGroups)=>{
        try {
            if (!peraWalletRef.current) {
                const mod = await __turbopack_context__.A("[project]/staking_pool/v0-modern-landing-page-for-webdeve/node_modules/@perawallet/connect/dist/index.js [app-ssr] (ecmascript, async loader)");
                const PeraWalletConnect = mod.default || mod.PeraWalletConnect || mod;
                peraWalletRef.current = new PeraWalletConnect();
            }
            // Normalize and flatten txnGroups to a flat array of Uint8Array (raw unsigned txn bytes).
            const toU8 = (t)=>{
                if (typeof t === 'string') {
                    const bin = atob(t);
                    const u8 = new Uint8Array(bin.length);
                    for(let i = 0; i < bin.length; i++)u8[i] = bin.charCodeAt(i);
                    return u8;
                }
                if (t instanceof Uint8Array) return t;
                if (t && t.txn) {
                    const b64 = t.txn;
                    const bin = atob(b64);
                    const u8 = new Uint8Array(bin.length);
                    for(let i = 0; i < bin.length; i++)u8[i] = bin.charCodeAt(i);
                    return u8;
                }
                // fallback: try to atob the string coercion
                try {
                    const str = String(t);
                    const bin = atob(str);
                    const u8 = new Uint8Array(bin.length);
                    for(let i = 0; i < bin.length; i++)u8[i] = bin.charCodeAt(i);
                    return u8;
                } catch (e) {
                    throw new Error('Unable to normalize transaction payload to Uint8Array');
                }
            };
            const flattened = txnGroups.flat().map(toU8);
            // First, try passing a flat array of base64 strings (avoid Uint8Array transport issues)
            try {
                const flattenedB64 = flattened.map((u)=>{
                    let binary = '';
                    for(let i = 0; i < u.length; i++)binary += String.fromCharCode(u[i]);
                    return btoa(binary);
                });
                const signed = await peraWalletRef.current.signTransaction(flattenedB64);
                return signed;
            } catch (firstErr) {
                try {} catch (__) {}
                // Next, try raw Uint8Array (existing path)
                try {
                    const signedRaw = await peraWalletRef.current.signTransaction(flattened);
                    return signedRaw;
                } catch (secondTryErr) {}
                // helper to convert uint8array -> base64
                const u8ToB64 = (u8)=>{
                    let binary = '';
                    for(let i = 0; i < u8.length; i++)binary += String.fromCharCode(u8[i]);
                    return btoa(binary);
                };
                // Build grouped { txn: base64 } objects matching the original grouping structure
                const alt = txnGroups.map((g)=>g.map((t)=>{
                        const u = toU8(t);
                        return {
                            txn: u8ToB64(u),
                            signers: [],
                            message: 'Please sign this transaction'
                        };
                    }));
                try {
                    const signed2 = await peraWalletRef.current.signTransaction(alt);
                    return signed2;
                } catch (secondErr) {
                    throw secondErr;
                }
            }
        } catch (e) {
            // As a last resort, try low-level WalletConnect RPC on the underlying connector to avoid Pera's helper re-encoding.
            try {
                const connector = peraWalletRef.current?.connector;
                if (!connector) {
                    console.warn('[WALLET] no underlying connector available for low-level RPC');
                    return null;
                }
                // Build grouped base64 payload same shape as original groups
                const u8ToB64 = (u8)=>{
                    let binary = '';
                    for(let i = 0; i < u8.length; i++)binary += String.fromCharCode(u8[i]);
                    return btoa(binary);
                };
                const groupedB64 = txnGroups.map((g)=>g.map((t)=>{
                        if (typeof t === 'string') return t;
                        if (t instanceof Uint8Array) return u8ToB64(t);
                        if (t && t.txn) return String(t.txn);
                        // coerce
                        try {
                            return u8ToB64(new Uint8Array(t));
                        } catch (_) {
                            return String(t);
                        }
                    }));
                // Algorand WalletConnect spec requires algo_signTxn with specific format
                const tryMethods = [
                    'algo_signTxn'
                ];
                // Helper to attempt a request using connector APIs
                const trySend = async (method, params)=>{
                    // WalletConnect v1 connectors expose sendCustomRequest
                    if (typeof connector.sendCustomRequest === 'function') {
                        return await connector.sendCustomRequest({
                            method,
                            params
                        });
                    }
                    // WalletConnect v2 connectors (or other) may expose request
                    if (typeof connector.request === 'function') {
                        try {
                            return await connector.request({
                                method,
                                params
                            });
                        } catch (e) {
                            // some connectors expect { topic, chainId, request }
                            try {
                                return await connector.request({
                                    topic: connector.session?.topic,
                                    chainId: connector.session?.namespaces?.algorand?.chains?.[0] || 'algorand:testnet',
                                    request: {
                                        method,
                                        params
                                    }
                                });
                            } catch (ee) {
                                throw ee;
                            }
                        }
                    }
                    throw new Error('Connector does not support sendCustomRequest or request');
                };
                // Format transactions according to Algorand WalletConnect spec:
                // Each txn must be { txn: base64, message?: string, signers?: string[] }
                const formattedTxns = groupedB64.flat().map((txnB64)=>({
                        txn: txnB64,
                        message: 'Please sign this transaction'
                    }));
                for (const m of tryMethods){
                    try {
                        // Pera expects params to be a single array argument: [ formattedTxns ]
                        const res = await trySend(m, [
                            formattedTxns
                        ]);
                        // The response shape may vary; try to normalize to Uint8Array[]
                        if (!res) continue;
                        // If response is nested groups, flatten
                        const flatten = (r)=>{
                            if (Array.isArray(r)) {
                                return r.flatMap((x)=>Array.isArray(x) ? x : [
                                        x
                                    ]);
                            }
                            return [
                                r
                            ];
                        };
                        const raw = flatten(res);
                        const toU8 = (item)=>{
                            if (typeof item === 'string') {
                                const bin = atob(item);
                                const u8 = new Uint8Array(bin.length);
                                for(let i = 0; i < bin.length; i++)u8[i] = bin.charCodeAt(i);
                                return u8;
                            }
                            if (item && item.blob) {
                                const bin = atob(item.blob);
                                const u8 = new Uint8Array(bin.length);
                                for(let i = 0; i < bin.length; i++)u8[i] = bin.charCodeAt(i);
                                return u8;
                            }
                            if (item instanceof Uint8Array) return item;
                            return null;
                        };
                        const signedArr = raw.map((r)=>toU8(r)).filter((x)=>x != null);
                        if (signedArr.length) return signedArr;
                    } catch (rpcErr) {
                        continue;
                    }
                }
                return null;
            } catch (finalErr) {
                return null;
            }
        }
    };
    // Expose a dev-only helper for quick testing in the browser console:
    try {
        if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
        ;
    } catch (e) {
    // ignore attach errors in constrained runtimes
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(WalletContext.Provider, {
        value: {
            isConnected,
            walletAddress,
            connect,
            disconnect,
            signTransactions
        },
        children: children
    }, void 0, false, {
        fileName: "[project]/staking_pool/v0-modern-landing-page-for-webdeve/components/wallet-context.tsx",
        lineNumber: 291,
        columnNumber: 5
    }, this);
}
function useWallet() {
    const context = (0, __TURBOPACK__imported__module__$5b$project$5d2f$staking_pool$2f$v0$2d$modern$2d$landing$2d$page$2d$for$2d$webdeve$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useContext"])(WalletContext);
    if (!context) {
        throw new Error("useWallet must be used within a WalletProvider");
    }
    return context;
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__6e8024b9._.js.map